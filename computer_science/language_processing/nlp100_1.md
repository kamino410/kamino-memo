# 言語処理100本ノック 2015

http://www.cl.ecei.tohoku.ac.jp/nlp100/

## 第1章 準備運動

### 00. 文字列の逆順

文字列"stressed"の文字を逆に（末尾から先頭に向かって）並べた文字列を得よ．

```py
str1 = 'stressed'
print(str1[::-1])
```

```
desserts
```

### 01. 「パタトクカシーー」

「パタトクカシーー」という文字列の1,3,5,7文字目を取り出して連結した文字列を得よ．

```py
str1 = 'パタトクカシーー'
print(str1[1::2])
```

```
タクシー
```

### 02. 「パトカー」＋「タクシー」＝「パタトクカシーー」

「パトカー」＋「タクシー」の文字を先頭から交互に連結して文字列「パタトクカシーー」を得よ．

```py
str1 = 'パトカー'
str2 = 'タクシー'
str3 = ''

for a, b in zip(str1, str2):
    str3 = str3 + a + b

str3 += str1[len(str2):] if len(str1) > len(str2) else str2[len(str1):]

print(str3)
```

```
パタトクカシーー
```

### 03. 円周率

"Now I need a drink, alcoholic of course, after the heavy lectures involving quantum mechanics."という文を単語に分解し，各単語の（アルファベットの）文字数を先頭から出現順に並べたリストを作成せよ．

```py
str1 = "Now I need a drink, alcoholic of course, after the heavy lectures involving quantum mechanics."

str2 = str1.replace(',', '').replace('.', '')
words = str2.split(' ')
res = [len(s) for s in words]
print(res)
```

```
[3, 1, 4, 1, 5, 9, 2, 6, 5, 3, 5, 8, 9, 7, 9]
```

### 04. 元素記号

"Hi He Lied Because Boron Could Not Oxidize Fluorine. New Nations Might Also Sign Peace Security Clause. Arthur King Can."という文を単語に分解し，1, 5, 6, 7, 8, 9, 15, 16, 19番目の単語は先頭の1文字，それ以外の単語は先頭の2文字を取り出し，取り出した文字列から単語の位置（先頭から何番目の単語か）への連想配列（辞書型もしくはマップ型）を作成せよ．

```py
str1 = "Hi He Lied Because Boron Could Not Oxidize Fluorine. New Nations Might Also Sign Peace Security Clause. Arthur King Can."
checked = [1, 5, 6, 7, 8, 9, 15, 16, 19]

words = str1.replace('.', '').split(' ')
dic = {i+1:s[0] if i + 1 in checked else s[:2] for i, s in enumerate(words)}
print(dic)
```

```
{1: 'H', 2: 'He', 3: 'Li', 4: 'Be', 5: 'B', 6: 'C', 7: 'N', 8: 'O', 9: 'F', 10: 'Ne', 11: 'Na', 12: 'Mi', 13: 'Al', 14: 'Si', 15: 'P', 16: 'S', 17: 'Cl', 18: 'Ar', 19: 'K', 20: 'Ca'}
```

### 05. n-gram

与えられたシーケンス（文字列やリストなど）からn-gramを作る関数を作成せよ．この関数を用い，"I am an NLPer"という文から単語bi-gram，文字bi-gramを得よ．

#### n-gramとは

検索対象の文章からn文字・n単語ずつ切り出したものをインデックス、文章IDを値とした辞書を作成し、検索ワードに一致する文字・単語をインデックスから検索することで文章を検索する手法。
特にn=1のとき**uni-gram**、n=2のとき**bi-gram**、n=3のとき**tri-gram**という。

```py
def gen_n_gram(source, n):
    return {tuple(source[i:i + n]) for i in range(len(source) - n + 1)}

str1 = "I am an NLPer"
chars_bigram = gen_n_gram(str1, 2)
words_bigram = gen_n_gram(str1.split(' '), 2)

print(chars_bigram)
print(words_bigram)
```

```
{('n', ' '), ('a', 'm'), ('e', 'r'), ('N', 'L'), ('L', 'P'), (' ', 'a'), ('a', 'n'), ('P', 'e'), ('m', ' '), (' ', 'N'), ('I', ' ')}
{('am', 'an'), ('an', 'NLPer'), ('I', 'am')}
```

### 06. 集合

"paraparaparadise"と"paragraph"に含まれる文字bi-gramの集合を，それぞれ, XとYとして求め，XとYの和集合，積集合，差集合を求めよ．さらに，'se'というbi-gramがXおよびYに含まれるかどうかを調べよ．

```py
def gen_n_gram(source, n):
    return {tuple(source[i:i + n]) for i in range(len(source) - n + 1)}

str1 = "paraparaparadise"
str2 = "paragraph"

X = gen_n_gram(str1, 2)
Y = gen_n_gram(str2, 2)

print(X | Y)
print(X & Y)
print(X - Y)
```
```
{('a', 'p'), ('d', 'i'), ('a', 'r'), ('s', 'e'), ('a', 'd'), ('p', 'h'), ('p', 'a'), ('r', 'a'), ('i', 's'), ('a', 'g'), ('g', 'r')}
{('a', 'p'), ('r', 'a'), ('a', 'r'), ('p', 'a')}
{('i', 's'), ('d', 'i'), ('s', 'e'), ('a', 'd')}
```

### 07. テンプレートによる文生成

引数x, y, zを受け取り「x時のyはz」という文字列を返す関数を実装せよ．さらに，x=12, y="気温", z=22.4として，実行結果を確認せよ．

```py
def gen_message(x, y, z):
    return str(x) + '時の' + y + 'は' + str(z)

print(gen_message(12, '気温', 22.4))
```

```
12時の気温は22.4
```

### 08. 暗号文

与えられた文字列の各文字を，以下の仕様で変換する関数cipherを実装せよ．

* 英小文字ならば(219 - 文字コード)の文字に置換
* その他の文字はそのまま出力

この関数を用い，英語のメッセージを暗号化・復号化せよ．

#### 補足

アトバシュ暗号（Atbash Cipher）。
`ord('a') -> 97`、`ord('z') -> 122`のため、219から引き算するとアルファベット順が逆転する。

```py
def cipher(s):
    return ''.join([chr(219 - ord(ch)) if ch.islower() else ch for ch in s])

str1 = 'abcdefghijklmnopqrstuvwxyz'
print(cipher(str1))
print(cipher(cipher(str1)))
```

```
zyxwvutsrqponmlkjihgfedcba
abcdefghijklmnopqrstuvwxyz
```

### 09. Typoglycemia

スペースで区切られた単語列に対して，各単語の先頭と末尾の文字は残し，それ以外の文字の順序をランダムに並び替えるプログラムを作成せよ．ただし，長さが４以下の単語は並び替えないこととする．適当な英語の文（例えば"I couldn't believe that I could actually understand what I was reading : the phenomenal power of the human mind ."）を与え，その実行結果を確認せよ．

#### 補足

タイポグリセミア（typoglycemia）は、人間は単語の両端さえ合っていれば内側の文字がシャッフルされていても文章を読める、という現象。

```py
import random

def typoglycemia(s):
    def parse(w):
        if len(w) <= 4:
            return w
        else:
            mid = list(w[1:-1])
            random.shuffle(mid)
            return w[0] + ''.join(mid) + w[-1]
    return ' '.join([parse(w) for w in s.split(' ')])

str1 = "I couldn't believe that I could actually understand what I was reading : the phenomenal power of the human mind ."
print(typoglycemia(str1))
```

```
I c'dnluot belevie that I could altlacuy utrnsedand what I was rniedag : the pmaohenenl poewr of the human mind .
```
