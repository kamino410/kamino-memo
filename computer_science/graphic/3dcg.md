# 3次元コンピューターグラフィックス

## モデリング（modeling）

### シーンとオブジェクト（scene / object）

画像化の対象となる仮想空間を**シーン**という。
また、シーンに配置された仮想物体・光源・カメラなどを**オブジェクト**という。

### シーングラフ（scene graph）

シーン上のオブジェクトのサイズ・向き・位置関係をグラフで表現したものを**シーングラフ**という。
ラスタライズの処理を効率化するため、一般的には木構造・DAGで表現する。

### ポリゴン（polygon）

通常、3DCGオブジェクトは多数の多角形（**ポリゴン**）の組み合わせで近似的に表現する。
これを**ポリゴンメッシュ**という（ポリゴンメッシュを省略してポリゴンと呼ぶこともある）。

四角形以上の多角形をポリゴンとすると非平面ポリゴンを想定した処理を実装する必要がありアルゴリズムが煩雑になる。
そのため、一般的には三角形をポリゴンとすることが多い。

### テクスチャマッピング（texture mapping）

オブジェクトの表面に定義済みの画像を貼り付けて表面特性（質感）を表現する手法を**テクスチャマッピング**という。
メモリ上に保持したテクスチャを使いまわせるため処理が軽くなる反面、視点からの距離に応じた解像度の変化に対応できないなどの欠点がある。

## レンダリング（rendering）

シーンを記述したデータから画像・映像・音声などを生成することを**レンダリング**という。
また、レンダリングを行うソフトウェアを**レンダリングエンジン**・**レンダラー**と呼ぶ。

また一連のレンダリング処理の手順を**レンダリングパイプライン**・**グラフィックスパイプライン**と呼ぶ。

OpenGL4.0では次のようにレンダリングパイプラインが定義されている。

* Vertex Specification
* Vertex Processing
  * Vertex Shader
  * Tessellation
  * Geometry Shader
* Vertex Post-Processing
  * Transform Feedback
* Primitive Assembly
  * Face Culling
* Rasterization
* Fragment Shader
* Per-Sample Processing
  * Scissor Test
  * Stencil Test
  * Depth Test
  * Blending
  * Logical Operation
  * Write Mask

またDirectX10では次のようにレンダリングパイプラインが定義されている。

* Input-Assembler Stage
* Vertex-Shader Stage
* Geometry-Shader Stage
* Stream-Output Stage
* Rasterizer Stage
* Pixel-Shader Stage
* Output-Merger Stage

### シェーディング（shading）

光源距離・光源と面の角度などを考慮して物体表面の色を変化させ、陰影をつける処理を**シェーディング**という。
シェーディングを施すことで、物体に奥行き感を加わり立体的な形状が把握しやすくなる。

シェーディングを行うプログラムを**シェーダ**と呼ぶ。

#### バーテックスシェーダ（頂点シェーダ）（vertex shader）

シーン上のオブジェクトの頂点に関する座標変換の処理を行うプログラムを**バーテックスシェーダ**と呼ぶ。

#### テッセレーション（tessellation）

必要に応じて描画時にモデルのポリゴンを細かく分割することを**テッセレーション**という。
テッセレーションを利用することで最初に読み込むモデルのポリゴンを粗めにし、データ量を抑制することができる。

#### ジオメトリシェーダ（geometry shader）

バーテックスシェーダから出力された頂点を以降の処理で利用するデータ構造（OpenGLではプリミティブと呼ぶ）に変換するシェーダ。
必要に応じて頂点数を増減させたり利用するプリミティブの種類を変えるなどの拡張を行う。

#### ラスタライズ（rasterization）

セルを格子状に並べたようなデータ構造をラスタ形式（ラスタデータ）といい、あるデータをラスタ形式に変換する処理をラスタライズという。
レンダリングパイプラインにおけるラスタライズとは、描画する平面に投影された各ポリゴンを画素に対応したフラグメントに割り当てる処理を指す（設定によっては1画素につき複数のフラグメントを持たせることができるらしい）。

#### フラグメントシェーダ（fragment shader）

ラスタライズによって生成されたフラグメントを画像に変換するシェーダ。

#### 双方向反射率分布関数（Bidirectional reflectance distribution function : BRDF）

最も単純な反射モデルの1つ。

ある入射方向からある波長の光が入射したとき、各方向にどれだけ反射するかを表した関数。
入射・反射の関係を入れ替えても同じ値が得られる**相反性（reciprocity）**を持つ。

#### ランバート反射（Lambertian reflection）

入射した光がすべての方向に均等に拡散されるという理想的な拡散反射を表したシェーディングモデル。

#### フラットシェーディング・コンスタントシェーディング（flat shading / constant shading）

1つのポリゴン面全体に一定の反射モデルを適用するシェーディング手法。
ポリゴン面上の輝度が一様になるためフラット・コンスタントシェーディングと呼ばれる。

処理速度は速いが、全体的に角ばった表現になり、リアルさに欠ける。

#### グーローシェーディング（Gouraud shading）

1971年ユタ大学のHenri Gouraudが考案したシェーディングモデル。

#### フォンシェーディング（Phong shading）

1973年ユタ大学のBui Tuong Phongが考案したシェーディングモデル。

拡散反射成分・鏡面反射成分に加えて、表面の法線方向に依存しない、すなわち光源と物体色にのみ依存してシーン内に一様に与えられる項を導入している。

環境光反射成分は本来、二次反射などを考慮して計算されるものだが、フォンのシェーディングモデルではシーン中に一様に光を値得ることでこれを近似的に表している。

#### シェーディング言語（shading language）

シェーダーのプログラミングに特化したプログラミング言語。

* GLSL（OpenGL Shading Language）
* HLSL（High Level Shading Language）
* Cg（C for Graphics）
